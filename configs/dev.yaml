# ============================================
# 开发环境配置 (dev.yaml)
# ============================================
# 用途：本地开发调试
# 特点：debug 日志 + 彩色控制台 + 宽松的安全策略
# ============================================

# ==================== 数据库配置 ====================
database:
  host: www.youlai.tech         # MySQL 主机地址
  port: 3306                    # MySQL 端口
  username: youlai              # 数据库用户名
  password: "123456"            # 数据库密码（可通过环境变量 APP_DATABASE_PASSWORD 覆盖）
  dbname: youlai_boot           # 数据库名称
  charset: utf8mb4              # 字符集（支持 emoji）
  parseTime: true               # 自动解析时间类型
  loc: Local                    # 时区设置
  
  # 连接池配置
  maxIdleConns: 10              # 最大空闲连接数
  maxOpenConns: 100             # 最大打开连接数
  connMaxLifetime: 3600         # 连接最大存活时间（秒）

# ==================== 日志配置 ====================
logger:
  level: debug                  # 日志级别：debug/info/warn/error（开发用 debug）
  
  # 控制台输出配置
  console:
    enabled: true               # 是否启用控制台输出
    color: true                 # 是否启用彩色输出（开发建议启用）
    format: text                # 输出格式：text（易读）/ json（机器解析）
  
  # 文件输出配置
  file:
    enabled: true               # 是否启用文件输出
    path: logs/dev.log          # 日志文件路径
    maxSize: 100                # 单个文件最大大小（MB）
    maxBackups: 7               # 保留的旧日志文件个数
    maxAge: 7                   # 保留的最大天数
    compress: false             # 是否压缩旧日志（开发环境不压缩，便于查看）
    format: json                # 文件格式（json 便于后续分析）
    errorPath: logs/dev-error.log  # 错误日志单独文件

# ==================== Redis 配置 ====================
redis:
  host: 127.0.0.1               # Redis 主机（开发用本地）
  port: 6379                    # Redis 端口
  password: ""                  # Redis 密码（本地开发通常无密码）
  database: 0                   # Redis 数据库编号（0-15）
  
  # 连接池配置
  pool:
    maxIdle: 10                 # 最大空闲连接数
    maxActive: 100              # 最大活动连接数
    minIdle: 5                  # 最小空闲连接数
  
  # 超时配置（秒）
  timeout:
    dial: 5                     # 建立连接超时
    read: 3                     # 读取超时
    write: 3                    # 写入超时
    pool: 5                     # 连接池获取连接超时

# ==================== 安全配置 ====================
security:
  sessionType: jwt              # 会话类型：jwt（无状态）/ redis-token（有状态）
  
  # JWT 配置（无状态会话）
  jwt:
    secretKey: "youlai-gin-dev-secret-key-change-in-production"  # JWT 签名密钥（⚠️ 生产环境必须修改）
    accessTokenTTL: 7200        # 访问令牌有效期（秒，2小时）
    refreshTokenTTL: 2592000    # 刷新令牌有效期（秒，30天）
    enableSecurityVersion: true # 是否启用安全版本号（密码修改后使旧 Token 失效）
  
  # Redis Token 配置（有状态会话）
  redisToken:
    accessTokenTTL: 7200        # 访问令牌有效期（秒）
    refreshTokenTTL: 2592000    # 刷新令牌有效期（秒）
    allowMultiLogin: true       # 是否允许多设备同时登录（开发环境允许）

# ==================== 环境变量覆盖示例 ====================
# 任何配置项都可以通过环境变量覆盖，格式：APP_<模块>_<字段>
# 
# 示例：
#   export APP_DATABASE_PASSWORD="new-password"      # 覆盖数据库密码
#   export APP_LOGGER_LEVEL="info"                   # 覆盖日志级别
#   export APP_REDIS_HOST="remote-redis.com"         # 覆盖 Redis 地址
#   export APP_SECURITY_JWT_SECRETKEY="new-secret"   # 覆盖 JWT 密钥
